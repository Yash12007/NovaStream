<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovaStream IDE</title>
    <link rel="icon" href="https://icons.getbootstrap.com/assets/icons/box.svg">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
        body {
            cursor: none;
            overflow: hidden;
            overflow-y: hidden;
            overflow-x: hidden;
            background: black;
            color: white;
            animation: 3s changeop;
        }
        @keyframes changeop {
            0%{
                opacity: 0;
            }
            100%{
                opacity: 1;
            }
        }
        @keyframes loading {
            0%{
                width: 0;
            }
            100%{
                width: 100%;
            }
        }
        button{
            background: none;
            border: none;
            color: white;
            cursor: none;
        }
        a{
            cursor: none;
        }
        #custom-cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: none;
            pointer-events: none;
            transform: translate(-50%, -50%);
            transition: transform 0.15s ease;
            z-index: 9999;
            color: white;
            top: -50px;
            left: -50px;
        }
        #main-body{
            cursor: none;
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            height: 100%;
            width: 100%;
        }
        #load{
            background-image: linear-gradient(to right, cyan, blue);
            height: 3px;
            width: 100%;
            top: 55px;
            left: 0;
            position: absolute;
            animation: 1.5s loading;
        }
        #bottom{
            position: absolute;
            bottom: 0;
            left: 0;
            background: none;
            height: 55px;
            width: 100%;
            display: grid;
            place-items: center;
        }
        #bottom-sec{
            background-color: green;
            width: 100%;
            height: 3px;
            position: absolute;
            bottom: 50px;
            left: 0;
            animation: 1.5s loading;
        }
        #view, #file, #Run{
            background: black;
            opacity: 1;
            border: solid 1px cyan;
            height: 80%;
            color: white;
            width: 80%;
            border-radius: 10px;
            position: absolute;
            top: -50000px;
            left: -50000px;
        }
        .offcanvas{
            background: black;
            color: white;
        }
    </style>
</head>
<body>
    <div id="main-body"></div>
    <div id="load"></div>
    <div id="custom-cursor">
        <i class="bi bi-box"></i>
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box" viewBox="0 0 16 16">
            <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5 8 5.961 14.154 3.5 8.186 1.113zM15 4.239l-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
        </svg>
    </div>
    <div class="form-floating" style="overflow: auto; position: absolute; top: 58px; left: 0; cursor: none;">
        <textarea data-bs-theme="dark" class="form-control" placeholder="Write your code here..." id="floatingTextarea2" style="height: 500px; width: 100%; cursor: none;"></textarea>
        <p>&copy; 2023 Yash12007, All rights reserved.</p>
    </div>
    <div id="bottom-sec"></div>
    <div id="bottom">
        <div style="display: flex;">
            <button onclick="fileop()" style="cursor: none;">File</button>
            <button style="cursor: none;">Save</button>
            <button style="cursor: none;">Save as</button>
            <button onclick="view()" style="cursor: none;">View</button>
            <button style="cursor: none;" onclick="runfile()">Run</button>
            <button type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample" style="cursor: none;">
                <i class="bi bi-three-dots-vertical"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                </svg>
            </button>
        </div>
    </div>
    <div id="view">
        <h3>Editor Style</h3>
        <div style="display: flex;">
            <div class="dropdown" data-bs-theme="dark">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Font family
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#" style="font-family: arial;">Arial</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: calibri;">Calibri</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Times New Roman', Times, serif;">Times New Roman</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Helvetica', sans-serif;">Helvetica</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Georgia', serif;">Georgia</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Verdana', sans-serif;">Verdana</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Courier New', Courier, monospace;">Courier New</a></li>
                    <li><a class="dropdown-item" href="#" style="font-family: 'Arial Narrow', sans-serif;">Arial Narrow</a></li>
                </ul>
            </div>
            <div class="dropdown" data-bs-theme="dark">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Font size
                </a>
                <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">12px</a></li>
                <li><a class="dropdown-item" href="#">14px</a></li>
                <li><a class="dropdown-item" href="#">16px</a></li>
                <li><a class="dropdown-item" href="#">18px</a></li>
                <li><a class="dropdown-item" href="#">20px</a></li>
                <li><a class="dropdown-item" href="#">22px</a></li>
                <li><a class="dropdown-item" href="#">24px</a></li>
                <li><a class="dropdown-item" href="#">26px</a></li>
                <li><a class="dropdown-item" href="#">28px</a></li>
                <li><a class="dropdown-item" href="#">30px</a></li>
                <li><a class="dropdown-item" href="#">32px</a></li>
                <li><a class="dropdown-item" href="#">34px</a></li>
                <li><a class="dropdown-item" href="#">36px</a></li>
                <li><a class="dropdown-item" href="#">38px</a></li>
                <li><a class="dropdown-item" href="#">40px</a></li>
                <li><a class="dropdown-item" href="#">42px</a></li>
                </ul>
            </div>
        </div>
        <button onclick="closeview()" style="cursor: none;">Close</button>
    </div>
    <div id="file">
        <h3>File operators</h3>
        <button style="cursor: none;" onclick="newfile()">New</button>
        <div class="mb-3" data-bs-theme="dark">
            <label for="formFile" class="form-label" style="cursor: none;">Open new file</label>
            <input class="form-control" type="file" id="formFile" style="cursor: none;">
        </div>
        <br>
        <button onclick="closeop()" style="cursor: none;">Close</button>
    </div>
    <div id="Run">
        <h3>HTML Viewer</h3>
        <div style="width: 80%; height: 80%; background: white;">
            <iframe id="htmlviewer" height="100%" width="100%"></iframe>
        </div>
        <br>
        <button onclick="closeviewer()" style="cursor: none;">Close</button>
        <button onclick="runnewtab()" style="cursor: none;">View file in new tab</button>
    </div>
    <nav class="navbar navbar-expand-lg" data-bs-theme="dark">
        <div class="container-fluid">
          <a class="navbar-brand" href="" style="font-family: 'Dancing Script', cursive; color: cyan;">
            NovaStream
          </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="https://yash12007.github.io/">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max#about">About</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max#services">Services</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="https://yash12007.github.io/Max/contact.html">Contact</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasExampleLabel">Account</h5>
        <button type="button" data-bs-dismiss="offcanvas">X</button>
    </div>
    <div class="offcanvas-body">
        <div>
            Share codes through emails
        </div>
        <div class="dropdown mt-3">
            <div id="profile">Your account info will apear here. If not apear then Sign up with Google.</div>
            <br>
            <button onclick="signInWithGoogle()" style="color: cyan;">
                <i class="bi bi-google"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-google" viewBox="0 0 16 16">
                    <path d="M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"/>
                </svg>
                Sign up with Google
            </button>
            <br>
            <button onclick="sharecode()" style="color: green;">
                <i class="bi bi-send"></i>
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                    <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
                </svg>
                Share current code
            </button>
        </div>
    </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script>
        function sharecode(){
            const textarea = document.querySelector('#floatingTextarea2');
            const content = textarea.value;
            const account = localStorage.getItem('account');
            try{
                fetch(account)
                .then(response => response.json())
                .then(data => {window.open('mailto:'+data.email+'?subject=Sharing%20Code&body='+content, '_blank');})
                .catch(error => console.error('Error fetching user information:', error));
            } catch(e){
                alert('Account not found! using default email.');
                window.open('mailto:user@example.com?subject=Sharing%20Code&body='+content, '_blank');
            }
        }
        function signInWithGoogle() {
            const datetime = Date();
            // Using a third-party API to get IP address
            fetch('https://api64.ipify.org?format=json')
            .then(response => response.json())
            .then(data => {
                const ipAddress = data.ip;
                localStorage.setItem('IP', ipAddress);
            })
            .catch(error => {
                console.error('Error:', error);
            });
            localStorage.setItem('Signup-date', datetime);
            const clientId = '364524252352-mueplfnejbmn0jupc9ut4j7kdsf7md8s.apps.googleusercontent.com';
            const redirectUri = 'https://yash12007.github.io/';
            const googleSignInUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${clientId}&redirect_uri=${redirectUri}&response_type=token&scope=email%20profile`;
            window.open(googleSignInUrl, '_self');
        }
        // Function to fetch user information from Google API
        function getUserInfo(accessToken) {
            const userInfoUrl = `https://www.googleapis.com/oauth2/v2/userinfo?access_token=${accessToken}`;
            try{
                localStorage.setItem('account', userInfoUrl);
            } catch(e){
                alert('Error while add account in your device');
            }
            fetch(userInfoUrl)
                .then(response => response.json())
                
                .then(data => {
                    // Update the user-info element with user account information
                    const userInfoElement = document.getElementById('profile');
                    userInfoElement.innerHTML = `
                        <img src='${data.picture}' alt='Profile Picture' width='30' height='30' style='border-radius: 50%; margin-right: 5px;'>
                        Welcome, ${data.name}
                        <br>
                        ${data.email}
                    `;
                })
                .catch(error => console.error('Error fetching user information:', error));
        }
        // Function to handle the redirect after successful sign-in with Google
        function handleGoogleSignIn() {
            const urlParams = new URLSearchParams(window.location.hash.substr(1));
            const accessToken = urlParams.get('access_token');
            if (accessToken) {
                getUserInfo(accessToken);
            }
        }
        // Call handleGoogleSignIn on page load to check for access token in the URL hash
        handleGoogleSignIn();
        let fileurl = '';
        document.querySelector('#floatingTextarea2').style = "width:"+window.innerWidth+"px; height:"+(window.innerHeight-200)+"px; cursor:none;";
        function runfile() {
            if(confirm('Are you sure that you are running HTML file?')==true){
                const textarea = document.querySelector('#floatingTextarea2');
                const content = textarea.value;
                const iframe = document.getElementById('htmlviewer');
                const dataUri = 'data:text/html;charset=utf-8,' + encodeURIComponent(content);
                iframe.src = dataUri;
                const blob = new Blob([content], { type: 'text/plain' });
                fileurl = URL.createObjectURL(blob);
                document.getElementById('Run').style.top = '10%';
                document.getElementById('Run').style.left = '10%';
            }
        }
        function runnewtab(){
            window.open(fileurl, '_blank');
        }
        function closeviewer(){
            document.getElementById('Run').setAttribute('style', 'top:-50000px; left:-50000px;');
        }
        const inp = document.getElementById('formFile');
        inp.addEventListener('change', function () {
            const file = inp.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const content = e.target.result;
                    document.querySelector('#floatingTextarea2').value = content;
                };
                reader.readAsText(file);
            }
        });
        function newfile(){
            if(confirm('Are you sure want to discard changes you have made?')==true){
                document.querySelector('#floatingTextarea2').value='';
            }else{
                saveFile();
                document.querySelector('#floatingTextarea2').value='';
            } 
        }
        function saveFile() {
            const textarea = document.querySelector('#floatingTextarea2');
            const content = textarea.value;
            const filename = prompt('Enter a filename with extension:');
            if (filename) {
                const blob = new Blob([content], { type: 'text/plain' });
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                a.click();
            }
        }
        function changeFontFamily(fontFamily) {
            document.querySelector('#floatingTextarea2').style.fontFamily = fontFamily;
        }
        function changeFontSize(fontSize) {
            document.querySelector('#floatingTextarea2').style.fontSize = fontSize;
        }
        function updateCursorPosition(event) {
            const customCursor = document.getElementById("custom-cursor");
            customCursor.style.left = event.clientX + "px";
            customCursor.style.top = event.clientY + "px";
        }
        function view(){
            document.getElementById('view').setAttribute('style', 'top:10%; left:10%;');
        }
        function closeview(){
            document.getElementById('view').setAttribute('style', 'top:-50000px; left:-50000px;');
        }
        function fileop(){
            document.getElementById('file').setAttribute('style', 'top:10%; left:10%;');
        }
        function closeop(){
            document.getElementById('file').setAttribute('style', 'top:-50000px; left:-50000px;');
        }
        document.addEventListener("mousemove", updateCursorPosition);
        document.querySelector('#bottom button:nth-child(2)').addEventListener('click', function () {
            saveFile();
        });
        document.querySelector('#bottom button:nth-child(3)').addEventListener('click', function () {
            saveFile();
        });
        document.querySelectorAll('.dropdown-menu a').forEach(item => {
            item.addEventListener('click', function () {
                const fontFamily = this.style.fontFamily;
                changeFontFamily(fontFamily);
            });
        });
        document.querySelectorAll('.dropdown-menu.font-size a').forEach(item => {
            item.addEventListener('click', function () {
                const fontSize = this.textContent;
                changeFontSize(fontSize);
            });
        });
    </script>
    <script>
        // Add keyboard shortcuts
        document.addEventListener('keydown', function (event) {
          // Check for key combinations
          if (event.ctrlKey && event.key === 's') {
            // Ctrl + S: Save file
            saveFile();
            event.preventDefault(); // Prevent the default browser save behavior
          } else if (event.ctrlKey && event.key === 'o') {
            // Ctrl + O: Open file dialog
            document.getElementById('formFile').click();
            event.preventDefault();
          } else if (event.ctrlKey && event.key === 'n') {
            // Ctrl + N: New file
            newfile();
            event.preventDefault();
          } else if (event.ctrlKey && event.key === 'r') {
            // Ctrl + R: Run file
            runfile();
            event.preventDefault();
          } else if (event.ctrlKey && event.key === 'e') {
            // Ctrl + E: Open Editor Style
            view();
            event.preventDefault();
          } else if (event.ctrlKey && event.key === 'f') {
            // Ctrl + F: Focus on the textarea for editing
            document.getElementById('floatingTextarea2').focus();
            event.preventDefault();
          }
        });
      </script>      
</body>
</html>
